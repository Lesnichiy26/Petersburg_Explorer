<!DOCTYPE html>
<html lang="ru">
<head>
    <title>Peterburg Explorer</title>
    <meta charset="utf-8">
    <script src="https://api-maps.yandex.ru/2.1/?lang=ru_RU&amp;apikey=40c4a6c4-78d6-4b90-b438-142071353c41"></script>
    <script>ymaps.ready(function() {
        // Для начала проверим, поддерживает ли плеер браузер пользователя.
        if (!ymaps.panorama.isSupported()) {
            // Если нет, то просто ничего не будем делать.
            return;
        }

        // Ищем панораму в переданной точке.
        ymaps.panorama.locate([{{ x }}, {{ y }}]).done(
            function (panoramas) {
                // Убеждаемся, что найдена хотя бы одна панорама.
                if (panoramas.length > 0) {
                    // Создаем плеер с одной из полученных панорам.
                    window.player = new ymaps.panorama.Player(
                        'player1',
                        // Панорамы в ответе отсортированы по расстоянию
                        // от переданной в panorama.locate точки. Выбираем первую,
                        // она будет ближайшей.
                        panoramas[0],

                        // Зададим направление взгляда, отличное от значения
                        // по умолчанию.
                        {
                            direction: [256, 16],
                            controls: []
                        }
                    );
                    window.panorama = player.getPanorama();
                    player.events.add('panoramachange', function () {
                        window.panorama = player.getPanorama();
                    });
                }
            },
            function (error) {
                // Если что-то пошло не так, сообщим об этом пользователю.
                alert(error.message);
            }
        );
        // Для добавления панорамы на страницу также можно воспользоваться
        // методом panorama.createPlayer. Этот метод ищет ближайщую панораму и
        // в случае успеха создает плеер с найденной панорамой.
    });

    function getCoordinates() {
        alert(panorama.getPosition()[0] + " " + panorama.getPosition()[1]);
    }
    </script>
    <script src="https://kit.fontawesome.com/4da3397637.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../static/css/style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">


</head>
<body>
<nav class="navbar navbar-dark bg-dark">
    <div class="container-fluid">
        <span class="navbar-brand mb-0 h1">Peterburg Explorer</span>
        {% if current_user.is_authenticated %}
            <a class="navbar-brand" href="/logout">
                <span>
                    <i class="fas fa-user-circle"></i>
                    {{ current_user.name }}
                </span>
            </a>
        {% else %}
            <span>
            <a href="/login" class="btn btn-secondary btn-sm">Log in</a>
            <a href="/signup" class="btn btn-primary btn-sm">Sign up</a>
        </span>
        {% endif %}
    </div>


</nav>

<div class="sidenav">
    <a href="#about">Petersburg Explorer</a>
    <a href="#services">Техподдержка</a>
    <a href="#contact">О проекте</a>
</div>
<div class="wrap_for_panorama">
    <div class="game_status">
        <div class="round">
            Раунд
        </div>
        <div class="round_number">
            {{ round }}
        </div>
        <div class="score">
            Очки
        </div>
        <div class="score_amount">
            {{ score }}
        </div>
    </div>
    <div class="destination">
        <div class="destination_name">
            {{ destination }}
        </div>
    </div>
    <div id="player1" class="player"></div>

    <form>
        <button type="submit" id="complete_btn"
                class="btn btn-success complete_round pull-right" formmethod="post">
            <i class="fas fa-check-square"></i>
            Завершить раунд
        </button>
    </form>


</div>


<div class="social">

    <a class="soc" href="#vk">
        <i class="fab fa-vk "></i>
    </a>
    <a class="soc" href="#telegram">
        <i class="fab fa-telegram"></i>
    </a>
</div>
</body>


